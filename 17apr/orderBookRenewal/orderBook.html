<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>서적주문</title>
    <script src="../../lib/jquery-3.3.1.min.js"></script>
    <script>
        var bookList = [
        {
            name : "4차 산업",
            price : 25000,
        },{
            name : "다이어트",
            price : 19000,
        },{
            name : "윤식당",
            price : 18000,
        },{
            name : "윤식당2",
            price : 25000,
        }
        ];

        $(document).ready(function(){
            for(var i = 0; i < bookList.length; i++){
                //bookList에서 object를 받아와 그 수만큼 row를 생성, 첫 컬럼에 name, 두번째 컬럼에 price,
                //세번째 컬럼에 input.quantity, 네번째 컬럼에 input.totalPrice를 넣어준다.
                $('#order-format>tbody').append(
                    $('<tr></tr>')
                        .append($("<td></td>").html(bookList[i].name))
                        .append($('<td class="price"></td>').html(bookList[i].price))
                        .append($("<td></td>")
                            .append($('<input type="number" class="quantity" value="0" min="0" onchange="calcSum()">'))
                        ).append($("<td></td>")
                            .append($('<input type="number" class="totalPrice" readonly>'))
                        )
                );
            }
        })
        
        function calcSum() {
            var quantity = 0;
            var priceSum = 0;
            var totalQuantity = 0;
            var totalPrice = 0;
            
            $('tbody>tr').each(function(index, item){
                quantity = Number($('tbody .quantity').eq(index).val());
                totalQuantity += quantity;
                
                priceSum = Number($('tbody .price').eq(index).html()* quantity);
                $('tbody .totalPrice').eq(index).val(priceSum);
                totalPrice += priceSum;
            });
            $('tfoot .quantity').val(totalQuantity);
            $('tfoot .totalPrice').val(totalPrice);
        }


    </script>
    <style>
        form {width: 800px; margin: auto;}
        #order-format {width:inherit; text-align: center; font-size: 16pt;}
        #order-format tr{height: 50px;}
        #order-format th:nth-child(2){width: 150px;}
        #order-format th:nth-child(3){width: 60px;}
        #order-format th:nth-child(4){width: 300px;}
        input.quantity {font-size: inherit; width: 50px;}
        input.totalPrice {font-size: inherit; width: 280px;}
    </style>
</head>
<body>
    <form action="" name="form01">
        <table border="1" id="order-format">
            <caption>서적 주문 양식</caption>
            <thead>
                <tr>
                    <th>책 제목</th>
                    <th>가격</th>
                    <th>수량</th>
                    <th>합계</th>
                </tr>
            </thead>
            <tfoot>
                <tr>
                    <td>합계</td>
                    <td></td>
                    <td><input type="number" class="quantity" readonly></td>
                    <td><input type="number" class="totalPrice" readonly></td>
                </tr>
            </tfoot>
            <tbody></tbody>
        </table>
        <!-- <input type="button" value="합계계산" onclick="calcSum();"> -->
        <!-- <input type="submit" value="제출">
        <input type="reset" value="초기화"> -->
    </form>
</body>
</html>